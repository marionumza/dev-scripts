#!/bin/bash
# Script to start odoo v8 docker instance
###############################################
# dir struct on host
#	~/postgresql
#	~/odoo80/sources
#	~/odoo80/${client}/config
#	~/odoo80/${client}/data_dir

client="STR"

#Include file lib in same dir as this file
. $(dirname $0)"/lib"

msgrun "\n Starting odoo v8 adhoc for ${client}"

#Levantar postgresql
sudo docker run -d \
	-e POSTGRES_USER=odoo \
	-e POSTGRES_PASSWORD=odoo \
	-v ~/postgresql:/var/lib/postgresql/data \
	--restart=always \
	--name db-odoo \
	postgres:9.4

#Levantar container para convertir archivos de aeroo
sudo docker run -d \
	-p 8989:8989 \
	--name="aeroo_docs" \
	--restart=always \
	jobiols/aeroo-docs

sudo docker run -d \
	--link aeroo_docs:aeroo \
	-p 127.0.0.1:8069:8069 \
	-p 127.0.0.1:8072:8072 \
	-v ~/odoo80/${client}/config:/etc/odoo \
	-v ~/odoo80/sources:/mnt/extra-addons \
	-v ~/odoo80/${client}/data_dir:/var/lib/odoo \
	--link db-odoo:db \
	--restart=always \
	--name ${client} \
	jobiols/odoo-adhoc:8.0
