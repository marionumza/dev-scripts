#!/bin/bash
###############################################
git status
echo -e "\n=== pulling scripts odoo v8 adhoc ==="
git pull
echo -e "\n=== installing scripts odoo v8 adhoc ==="
cp sd /usr/bin
cp up-odoo /usr/bin
cp down-odoo /usr/bin
cp developer-mode /usr/bin
cp session-mode /usr/bin
cp host-backup /usr/bin
cp host-restore /usr/bin
cp housekeeping /usr/bin
echo -e "\n=== pulling images odoo v8 adhoc ==="
docker pull adhoc/odoo-adhoc:8.0
docker pull adhoc/aeroo_docs
docker pull jobiols/backup
docker pull postgres:9.4
echo -e "\n=== all right for odoo v8 adhoc ==="


#!/bin/bash
###############################################################
REPO_DIR="/home/jorge/git-repos"
ADDONS_DIR="/home/ubuntu/70/addons/"

function usage
{
    echo -e "\nusage: install-scripts [-i] [-d] [-h]"
    echo "-i --images    Pull images from github"
#    echo "-d --developer Update developer environment"
    echo "-h --help      This help"
}

function get_images
{
    echo -e "\n=== pulling images odoo v8 adhoc ==="
 	docker pull adhoc/odoo-adhoc:8.0
	docker pull adhoc/aeroo_docs
 	docker pull jobiols/backup
 	docker pull postgres:9.4
}

function get_developer
{
    if [ -d "$ADDONS_DIR" ]; then
        echo -e "\n=== developer mode, generating simbolic links for odoo v7 ==="
        cd $ADDONS_DIR
        rm -r *
        ln -s $REPO_DIR/localizacion/*       $ADDONS_DIR/
        ln -s $REPO_DIR/curso                $ADDONS_DIR/
        ln -s $REPO_DIR/oerp_no_phoning_home $ADDONS_DIR/
        ln -s $REPO_DIR/odoo-addons/*        $ADDONS_DIR/
        cd -
    else
        echo -e "\n=== not a developer machine, aborting"
        exit 1
    fi
}

while [ "$1" != "" ]; do
   case $1 in
#        -d | --developer )      get_developer
                                ;;
        -i | --images )         get_images
                                ;;
        -h | --help )           usage
                                exit
                                ;;
        * )                     usage
                                exit 1
    esac
    shift
done

echo -e "\n=== pulling scripts odoo v8 adhoc ==="
if ! git pull; then
    echo "FAIL PULLING FROM REPO"
    exit 1
fi

echo -e "\n=== installing scripts odoo v8 adhoc ==="
cp sd /usr/bin
cp up-odoo /usr/bin
cp down-odoo /usr/bin
cp session-mode /usr/bin
cp db-backup /usr/bin
cp db-restore /usr/bin
cp db-clean /usr/bin

echo -e "\n=== all right for odoo v8 ==="
exit 0
